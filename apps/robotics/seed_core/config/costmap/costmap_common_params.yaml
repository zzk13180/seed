# ================================================================================
# 静态层参数
# ================================================================================
# 静态层加载静态地图数据，作为代价地图的基础
static_layer:
  # 是否启用静态层
  enabled: true
  
  # 订阅的地图话题
  map_topic: map
  
  # 未知区域代价值
  # 地图话题中数据值为此值时，转换为代价地图中的未知区域
  unknown_cost_value: -1
  
  # 致命代价阈值
  # PGM 栅格值大于此值时视为占用
  # 默认: 100
  lethal_cost_threshold: 50
  
  # 是否仅使用首次接收的地图
  # true: 忽略后续地图更新
  # false: 持续更新
  first_map_only: false
  
  # 是否订阅增量更新话题
  # 话题名: map_topic + "_updates"
  subscribe_to_updates: false
  
  # 是否跟踪未知空间
  # true: 保留三种状态（未知、自由、占用）
  # false: 未知区域视为自由区域
  track_unknown_space: false
  
  # 是否使用三元代价地图
  # true: 只有未知、自由、完全占用三种状态
  # false: 可以有不同的占用程度
  trinary_costmap: true

# ================================================================================
# 障碍层参数
# ================================================================================
# 障碍层处理传感器数据，检测动态障碍物
obstacles:
  # 是否启用障碍层
  enabled: true
  
  # ================================================================================
  # 观测源配置
  # ================================================================================
  # 可以设置多个观测源，如: "scan scan2 camera"
  observation_sources: scan
  
  # 激光雷达观测源配置
  scan:
    # 话题名称
    topic: scan
    
    # 传感器 TF 坐标系名称
    # 空字符串表示从话题数据中自动获取
    sensor_frame: base_scan
    
    # 数据格式: LaserScan, PointCloud, PointCloud2
    data_type: LaserScan
    
    # 观测数据保留时间（秒）
    # 0 表示只保留最近一帧
    observation_persistence: 0.0
    
    # 期望更新频率（Hz）
    # 0 表示不检查更新频率
    expected_update_rate: 0.0
    
    # 是否用于清除自由空间
    clearing: true
    
    # 是否用于标记障碍物
    marking: true
    
    # 最大障碍物高度（米）
    # 高于此值的障碍物不加入观测
    max_obstacle_height: 2.0
    
    # 最小障碍物高度（米）
    # 低于此值的障碍物不加入观测
    min_obstacle_height: 0.0
    
    # 障碍物检测范围（米）
    # 此范围内的障碍物会被添加到代价地图
    obstacle_range: 6.0
    
    # 射线追踪范围（米）
    # 用于清除自由空间
    raytrace_range: 6.0
    
    # 是否将无穷远值转换为最大距离
    inf_is_valid: true

  # ================================================================================
  # 全局障碍层参数（覆盖观测源设置）
  # ================================================================================
  
  # 最大障碍物高度
  max_obstacle_height: 2.0
  
  # 障碍物检测范围
  obstacle_range: 6.0
  
  # 射线追踪范围
  raytrace_range: 6.0
  
  # 是否跟踪未知空间
  # true: 代价地图有未知、自由、占用三种状态
  # false: 只有自由和占用两种状态
  track_unknown_space: false
  
  # 图层组合方法
  # 0: 障碍层覆盖其它图层
  # 1: 最大化方法（推荐），各层占用方格会覆盖自由方格
  # 99: 不改变其它图层
  combination_method: 1
